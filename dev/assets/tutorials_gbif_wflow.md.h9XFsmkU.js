import{_ as s,o as a,c as t,aA as e}from"./chunks/framework.D8jUZzrG.js";const n="/Rasters.jl/dev/assets/oufshxw.CarLgkfr.png",l="/Rasters.jl/dev/assets/cadqfby.B4azpIGc.png",c=JSON.parse('{"title":"Species distribution modelling workflow","description":"","frontmatter":{},"headers":[],"relativePath":"tutorials/gbif_wflow.md","filePath":"tutorials/gbif_wflow.md","lastUpdated":null}'),h={name:"tutorials/gbif_wflow.md"};function k(p,i,d,r,o,g){return a(),t("div",null,[...i[0]||(i[0]=[e(`<h1 id="Species-distribution-modelling-workflow" tabindex="-1">Species distribution modelling workflow <a class="header-anchor" href="#Species-distribution-modelling-workflow" aria-label="Permalink to &quot;Species distribution modelling workflow {#Species-distribution-modelling-workflow}&quot;">​</a></h1><p>This example shows a full Species distribution modelling workflow, from loading data, to cleaning it, to fitting an ensemble and generating predictions.</p><p>It uses GBIF and WorldClim data, which are common datasets in ecology. We&#39;ll load occurrences for the Mountain Pygmy Possum species using <a href="https://github.com/rafaqz/GBIF2.jl" target="_blank" rel="noreferrer">GBIF2.jl</a>, an interface to the <a href="https://www.gbif.org/" target="_blank" rel="noreferrer">Global Biodiversity Information Facility</a>, and extract environmental variables using BioClim data from <a href="https://github.com/EcoJulia/RasterDataSources.jl" target="_blank" rel="noreferrer">RasterDataSources.jl</a>.</p><h2 id="Load-Rasters,-ArchGDAL,-RasterDataSources-and-GBIF" tabindex="-1">Load Rasters, ArchGDAL, RasterDataSources and GBIF <a class="header-anchor" href="#Load-Rasters,-ArchGDAL,-RasterDataSources-and-GBIF" aria-label="Permalink to &quot;Load Rasters, ArchGDAL, RasterDataSources and GBIF {#Load-Rasters,-ArchGDAL,-RasterDataSources-and-GBIF}&quot;">​</a></h2><p>The GBIF2 library is used to download occurrence data, RasterDataSources to conveniently access Bioclim data. ArchGDAL is necessary to load in the Bioclim data.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Rasters, GBIF2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RasterDataSources, ArchGDAL</span></span></code></pre></div><p>Load occurrences for the Mountain Pygmy Possum using GBIF.jl</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">records </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GBIF2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">occurrence_search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Burramys parvus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; limit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">300-element GBIF2.Table{GBIF2.Occurrence, JSON3.Array{JSON3.Object, Vector{UInt8}, SubArray{UInt64, 1, Vector{UInt64}, Tuple{UnitRange{Int64}}, true}}}┌──────────────────────────┬─────────┬─────────┬─────────┬──────────┬───────────</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">                 geometry │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">    year │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">   month │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">     day │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">  kingdom │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">   phylum ⋯</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">│</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;"> Tuple{Float64, Float64}? │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Int64? │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Int64? │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Int64? │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  String? │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  String? ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">├──────────────────────────┼─────────┼─────────┼─────────┼──────────┼───────────</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (148.391, -36.3036) │    2015 │      11 │      15 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│                  missing │    2021 │       1 │       6 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (147.156, -36.9572) │    1993 │      10 │      20 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (148.333, -36.4333) │    2011 │      11 │      21 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│                  missing │ missing │ missing │ missing │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (148.396, -36.3818) │    2016 │      11 │      15 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (147.096, -36.9357) │    2020 │       2 │      10 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (148.332, -36.0734) │    2024 │      11 │       1 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (148.329, -36.4317) │    2016 │       1 │       3 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (146.521, -37.1834) │    2019 │      12 │      18 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (148.236, -36.5249) │    2012 │      11 │      23 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│                  missing │ missing │ missing │ missing │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (146.453, -37.1688) │    2019 │      12 │      18 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│                  missing │ missing │ missing │ missing │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      (146.486, -37.1313) │    2019 │      12 │      18 │ Animalia │ Chordata ⋯</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│            ⋮             │    ⋮    │    ⋮    │    ⋮    │    ⋮     │    ⋮     ⋱</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">└──────────────────────────┴─────────┴─────────┴─────────┴──────────┴───────────</span></span>
<span class="line"><span style="--shiki-light:#1b7c83;--shiki-light-font-weight:bold;--shiki-dark:#39c5cf;--shiki-dark-font-weight:bold;">                                                 78 columns and 285 rows omitted</span></span></code></pre></div><h2 id="Get-Bioclimatic-variables" tabindex="-1">Get Bioclimatic variables <a class="header-anchor" href="#Get-Bioclimatic-variables" aria-label="Permalink to &quot;Get Bioclimatic variables {#Get-Bioclimatic-variables}&quot;">​</a></h2><p>Get BioClim layers and subset to south-east Australia. The first time this is run, this will automatically download and save the files.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RasterStack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WorldClim{BioClim}, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">se_aus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> A[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">X</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">138</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ..</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 155</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ..</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Band</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">┌ </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">101</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">×</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">90</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> RasterStack</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> ┐</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">├────────────────────┴─────────────────────────────────────────────────── dims ┐</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">  ↓ </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">X</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> Projected{Float64} </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">138.16666666666666:0.16666666666666666:154.83333333333331</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> ForwardOrdered</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Regular</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Intervals{Start}</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">,</span></span>
<span class="line"><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">  → </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">Y</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> Projected{Float64} </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">-25.166666666666668:-0.16666666666666666:-40.0</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> ReverseOrdered</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Regular</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Intervals{Start}</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">├────────────────────────────────────────────────────────────────────── layers ┤</span></span>
<span class="line"><span style="--shiki-light:#00afaf;--shiki-dark:#00afaf;">  :bio1 </span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> eltype: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Union{Missing, Float32}</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> dims: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">X</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">Y</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> size: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">101</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">×</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">90</span></span>
<span class="line"><span style="--shiki-light:#00afaf;--shiki-dark:#00afaf;">  :bio3 </span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> eltype: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Union{Missing, Float32}</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> dims: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">X</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">Y</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> size: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">101</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">×</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">90</span></span>
<span class="line"><span style="--shiki-light:#00afaf;--shiki-dark:#00afaf;">  :bio7 </span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> eltype: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Union{Missing, Float32}</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> dims: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">X</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">Y</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> size: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">101</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">×</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">90</span></span>
<span class="line"><span style="--shiki-light:#00afaf;--shiki-dark:#00afaf;">  :bio12</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> eltype: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Union{Missing, Float32}</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> dims: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">X</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">Y</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> size: </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">101</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">×</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">90</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">├────────────────────────────────────────────────────────────────────── raster ┤</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">  missingval: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">missing</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">  extent: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Extent(X = (138.16666666666666, 154.99999999999997), Y = (-40.0, -25.0))</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">  crs: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.25722...</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">└──────────────────────────────────────────────────────────────────────────────┘</span></span></code></pre></div><p>Plot BioClim predictors and scatter occurrence points on all subplots</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># The coordinates from the gbif table</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">coords </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">skipmissing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(records</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">geometry))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CairoMakie</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Rasters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rplot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(se_aus);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ax </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">content</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ax </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">isa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Axis</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        scatter!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ax, coords; alpha</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, marker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;+&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:black</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, markersize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p</span></span></code></pre></div><p><img src="`+n+`" alt="" width="600px" height="450px"></p><h2 id="Extract-bioclim-variables-at-occurrence-points" tabindex="-1">Extract bioclim variables at occurrence points <a class="header-anchor" href="#Extract-bioclim-variables-at-occurrence-points" aria-label="Permalink to &quot;Extract bioclim variables at occurrence points {#Extract-bioclim-variables-at-occurrence-points}&quot;">​</a></h2><p>Then extract predictor variables and write to CSV. Use the skipmissing keyword to exclude both missing coordinates and coordinates with missing values in the RasterStack.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CSV</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">presences </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> extract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(se_aus, coords, skipmissing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CSV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;burramys_parvus_predictors.csv&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, presences)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">&quot;burramys_parvus_predictors.csv&quot;</span></span></code></pre></div><p>Or convert them to a <code>DataFrame</code>:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DataFrames</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DataFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(presences)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,:]</span></span></code></pre></div><div><div><div style = "float: left;"><span>5×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">geometry</th><th style = "text-align: left;">bio1</th><th style = "text-align: left;">bio3</th><th style = "text-align: left;">bio7</th><th style = "text-align: left;">bio12</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Tuple{Float64, Float64}" style = "text-align: left;">Tuple…</th><th title = "Float32" style = "text-align: left;">Float32</th><th title = "Float32" style = "text-align: left;">Float32</th><th title = "Float32" style = "text-align: left;">Float32</th><th title = "Float32" style = "text-align: left;">Float32</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">(148.391, -36.3036)</td><td style = "text-align: right;">6.1707</td><td style = "text-align: right;">41.1198</td><td style = "text-align: right;">23.4645</td><td style = "text-align: right;">1692.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">(147.156, -36.9572)</td><td style = "text-align: right;">9.40835</td><td style = "text-align: right;">40.7905</td><td style = "text-align: right;">23.0895</td><td style = "text-align: right;">1292.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">(148.333, -36.4333)</td><td style = "text-align: right;">7.83572</td><td style = "text-align: right;">41.5975</td><td style = "text-align: right;">23.5028</td><td style = "text-align: right;">1500.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">(148.396, -36.3818)</td><td style = "text-align: right;">6.88158</td><td style = "text-align: right;">42.2681</td><td style = "text-align: right;">23.133</td><td style = "text-align: right;">1544.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: left;">(147.096, -36.9357)</td><td style = "text-align: right;">9.40835</td><td style = "text-align: right;">40.7905</td><td style = "text-align: right;">23.0895</td><td style = "text-align: right;">1292.0</td></tr></tbody></table></div></div><h2 id="Sample-background-points" tabindex="-1">Sample background points <a class="header-anchor" href="#Sample-background-points" aria-label="Permalink to &quot;Sample background points {#Sample-background-points}&quot;">​</a></h2><p>Next, sample random background points in the Raster. Rasters has a StatsBase extension to make this very straightforward. The syntax and output of <code>Rasters.sample</code> is very similar to that of <code>extract</code>.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StatsBase</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">background </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Rasters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(se_aus, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, skipmissing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">500-element Vector{@NamedTuple{geometry::Tuple{Float64, Float64}, bio1::Float32, bio3::Float32, bio7::Float32, bio12::Float32}}:</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (146.66666666666666, -30.5), bio1 = 19.621834, bio3 = 43.27484, bio7 = 28.807251, bio12 = 386.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (148.33333333333331, -34.666666666666664), bio1 = 14.778135, bio3 = 47.299065, bio7 = 29.28075, bio12 = 670.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (140.83333333333331, -38.166666666666664), bio1 = 13.922814, bio3 = 51.261326, bio7 = 17.491802, bio12 = 789.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (151.16666666666666, -29.166666666666668), bio1 = 18.151886, bio3 = 51.7504, bio7 = 28.9255, bio12 = 754.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (146.33333333333331, -38.666666666666664), bio1 = 12.903114, bio3 = 49.39163, bio7 = 19.7145, bio12 = 1056.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (146.49999999999997, -29.0), bio1 = 20.880636, bio3 = 44.86907, bio7 = 30.110249, bio12 = 373.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (138.83333333333331, -32.666666666666664), bio1 = 17.028667, bio3 = 50.156033, bio7 = 29.7745, bio12 = 272.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (143.66666666666666, -27.166666666666668), bio1 = 22.04296, bio3 = 43.233974, bio7 = 30.57125, bio12 = 328.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (140.33333333333331, -32.333333333333336), bio1 = 17.53376, bio3 = 48.557724, bio7 = 29.737501, bio12 = 237.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (148.33333333333331, -31.166666666666668), bio1 = 18.747189, bio3 = 47.10494, bio7 = 30.297249, bio12 = 539.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> ⋮</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (140.33333333333331, -37.0), bio1 = 14.923604, bio3 = 52.820774, bio7 = 22.72425, bio12 = 584.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (144.83333333333331, -29.166666666666668), bio1 = 20.991396, bio3 = 42.55394, bio7 = 29.812748, bio12 = 287.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (142.99999999999997, -34.5), bio1 = 17.222115, bio3 = 48.464714, bio7 = 28.831501, bio12 = 324.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (141.49999999999997, -35.666666666666664), bio1 = 15.649594, bio3 = 50.422688, bio7 = 26.22625, bio12 = 338.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (144.99999999999997, -27.5), bio1 = 21.561354, bio3 = 43.362858, bio7 = 29.752998, bio12 = 374.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (146.49999999999997, -28.5), bio1 = 21.162104, bio3 = 44.892555, bio7 = 30.2475, bio12 = 383.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (143.49999999999997, -33.833333333333336), bio1 = 17.913876, bio3 = 48.320545, bio7 = 29.61525, bio12 = 284.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (143.99999999999997, -28.333333333333332), bio1 = 21.486, bio3 = 42.361164, bio7 = 30.30675, bio12 = 321.0)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> (geometry = (144.16666666666666, -34.833333333333336), bio1 = 16.952698, bio3 = 48.252426, bio7 = 28.98425, bio12 = 349.0)</span></span></code></pre></div><h2 id="Fit-a-statistical-ensemble" tabindex="-1">Fit a statistical ensemble <a class="header-anchor" href="#Fit-a-statistical-ensemble" aria-label="Permalink to &quot;Fit a statistical ensemble {#Fit-a-statistical-ensemble}&quot;">​</a></h2><p>In this example, we will <a href="https://github.com/tiemvanderdeure/SpeciesDistributionModels.jl" target="_blank" rel="noreferrer">SpeciesDistributionModels.jl</a> to fit a statistical ensemble to the occurrence and background data.</p><p>First we need to load the models. SDM.jl integrates with MLJ - see the <a href="https://juliaai.github.io/MLJ.jl/dev/model_browser/#Classification" target="_blank" rel="noreferrer">model browser</a> for what models are available.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Maxnet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MaxnetBinaryClassifier</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MLJGLMInterface</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinearBinaryClassifier</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># define the models in the ensemble</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    maxnet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MaxnetBinaryClassifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    maxnet2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MaxnetBinaryClassifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(features </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    glm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LinearBinaryClassifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">(maxnet = Maxnet.MaxnetBinaryClassifier(&quot;&quot;, 1.0, Maxnet.default_regularization, true, 50, 100.0, GLM.CloglogLink(), false, Base.Pairs{Symbol, Union{}, Nothing, @NamedTuple{}}()), maxnet2 = Maxnet.MaxnetBinaryClassifier(&quot;lq&quot;, 1.0, Maxnet.default_regularization, true, 50, 100.0, GLM.CloglogLink(), false, Base.Pairs{Symbol, Union{}, Nothing, @NamedTuple{}}()), glm = MLJGLMInterface.LinearBinaryClassifier(true, GLM.LogitLink(), nothing, 30, 1.0e-6, 1.0e-6, 0.001, [:deviance, :dof_residual, :stderror, :vcov, :coef_table]))</span></span></code></pre></div><p>Next, format the data using <code>sdmdata</code>. To test how rigurous our models are, we will use 3-fold cross-validation.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpeciesDistributionModels</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SDM </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpeciesDistributionModels</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sdmdata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(presences, background; resampler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; nfolds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">SDMdata object with </span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">204</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> presence points and </span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">500</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> absence points. </span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">Resampling: </span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Data is divided into 3 folds using resampling strategy CV(nfolds = 3, …).</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">┌──────┬─────────┬────────┐</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;"> fold │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;"> # train │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;"> # test │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">├──────┼─────────┼────────┤</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">│    1 │     469 │    235 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">│    2 │     469 │    235 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">│    3 │     470 │    234 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">└──────┴─────────┴────────┘</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">Predictor variables: </span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">┌───────┬────────────┬─────────┐</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> names │</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> scitypes   │</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> types   │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">├───────┼────────────┼─────────┤</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│ bio1  │ Continuous │ Float32 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│ bio3  │ Continuous │ Float32 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│ bio7  │ Continuous │ Float32 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│ bio12 │ Continuous │ Float32 │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">└───────┴────────────┴─────────┘</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Also contains geometry data</span></span></code></pre></div><p>Now, fit the ensemble, passing the data object and the <code>NamedTuple</code> of models!</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ensemble </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sdm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, models)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">trained SDMensemble, containing 9 SDMmachines across 3 SDMgroups </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Uses the following models:</span></span>
<span class="line"><span style="--shiki-light:#0366d6;--shiki-dark:#2188ff;">maxnet</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> =&gt; MaxnetBinaryClassifier. </span></span>
<span class="line"><span style="--shiki-light:#0366d6;--shiki-dark:#2188ff;">maxnet2</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> =&gt; MaxnetBinaryClassifier. </span></span>
<span class="line"><span style="--shiki-light:#0366d6;--shiki-dark:#2188ff;">glm</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> =&gt; LinearBinaryClassifier.</span></span></code></pre></div><p>Use SDM.jl&#39;s evaluate function to see how this ensemble performs.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SDM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ensemble)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">SpeciesDistributionModels.SDMensembleEvaluation with 4 performance measures</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">train</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">┌──────────┬──────────┬──────────┬───────────┬──────────┐</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">│</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">    model │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;"> accuracy │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">      auc │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">  log_loss │</span><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">    kappa │</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">│</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">      Any │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">   Float64 │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">├──────────┼──────────┼──────────┼───────────┼──────────┤</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│   maxnet │ 0.985085 │ 0.997126 │  0.159175 │ 0.963575 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│  maxnet2 │ 0.981535 │ 0.995827 │  0.170714 │ 0.954565 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      glm │ 0.981535 │ 0.994836 │ 0.0663541 │ 0.954674 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│ ensemble │ 0.982245 │ 0.997843 │  0.101174 │ 0.956262 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">└──────────┴──────────┴──────────┴───────────┴──────────┘</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">test</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">┌──────────┬──────────┬──────────┬──────────┬──────────┐</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">    model │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;"> accuracy │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">      auc │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;"> log_loss │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">    kappa │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">      Any │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">  Float64 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">├──────────┼──────────┼──────────┼──────────┼──────────┤</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│   maxnet │ 0.980118 │ 0.989911 │ 0.179433 │ 0.951434 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│  maxnet2 │ 0.980118 │ 0.991705 │ 0.180656 │ 0.951278 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│      glm │ 0.981536 │ 0.993024 │ 0.081344 │  0.95511 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">│ ensemble │ 0.981536 │ 0.995304 │ 0.110435 │  0.95511 │</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-light-font-weight:bold;--shiki-dark:#959da5;--shiki-dark-font-weight:bold;">└──────────┴──────────┴──────────┴──────────┴──────────┘</span></span></code></pre></div><p>Not too bad!</p><h2 id="Make-predictions-of-climatic-suitability" tabindex="-1">Make predictions of climatic suitability <a class="header-anchor" href="#Make-predictions-of-climatic-suitability" aria-label="Permalink to &quot;Make predictions of climatic suitability {#Make-predictions-of-climatic-suitability}&quot;">​</a></h2><p>Use the ensemble to</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">suitability </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SDM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">predict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ensemble, se_aus, reducer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mean)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">┌ </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">101</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">×</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">90</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> Raster{Union{Missing, Float64}, 2}</span><span style="--shiki-light:#959da5;--shiki-dark:#959da5;"> ┐</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">├───────────────────────────────────────────┴──────────────────────────── dims ┐</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">  ↓ </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">X</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> Projected{Float64} </span><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">138.16666666666666:0.16666666666666666:154.83333333333331</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> ForwardOrdered</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Regular</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Intervals{Start}</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">,</span></span>
<span class="line"><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">  → </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">Y</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> Projected{Float64} </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">-25.166666666666668:-0.16666666666666666:-40.0</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> ReverseOrdered</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Regular</span><span style="--shiki-light:#808080;--shiki-dark:#808080;"> Intervals{Start}</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">├────────────────────────────────────────────────────────────────────── raster ┤</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">  missingval: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">missing</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">  extent: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">Extent(X = (138.16666666666666, 154.99999999999997), Y = (-40.0, -25.0))</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">  crs: </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.25722...</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">└──────────────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;">   ↓</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;"> →</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">    -25.1667</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">      -25.3333</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      …  </span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">-39.6667</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">    -39.8333</span><span style="--shiki-light:#0087d7;--shiki-dark:#0087d7;">    -40.0</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 138.167</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">    3.73053e-6    4.1754e-6         missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 138.333</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">    3.85922e-6    4.34985e-6        missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 138.5</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      5.16329e-6    6.14795e-6        missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 138.667</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">    5.77387e-6    8.94478e-6        missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   ⋮                                  ⋱                            ⋮</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 154.333</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     missing       missing          missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 154.5</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">       missing       missing          missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 154.667</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     missing       missing    …     missing     missing     missing</span></span>
<span class="line"><span style="--shiki-light:#ff875f;--shiki-dark:#ff875f;"> 154.833</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     missing       missing          missing     missing     missing</span></span></code></pre></div><p>And let&#39;s see what that looks like</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(suitability, colorrange </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p><img src="`+l+'" alt="" width="600px" height="450px"></p>',49)])])}const b=s(h,[["render",k]]);export{c as __pageData,b as default};
